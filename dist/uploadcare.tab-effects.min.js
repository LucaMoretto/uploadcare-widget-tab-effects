!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,exports,t){e.exports=t(1)},function(e,exports,t){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r,n){var i=!1,o=function(t){if(!i){t.isImage&&(i=!0);var n=new c["default"]("ucarecdn.com/",t.originalImageInfo.width,t.originalImageInfo.height);n.parseUrl(t.cdnUrl);var o=new a["default"](e,n);o.render().then(function(e){t.cdnUrl=n.getPreviewUrl(),r.resolve()})}};r.fileColl.onAdd.add(function(e,t){e.then(o)});var s=r.fileColl.get();s.forEach(function(e,t){e.then(o)})}function i(){if(!uploadcare)throw Error("uploadcare widget not loaded");uploadcare.registerTab("preview",n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=i;var o=t(2),a=r(o),s=t(44),c=r(s);e.uploadcareTabEffects=i}).call(exports,function(){return this}())},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(3),i=r(n),o=t(4),a=r(o),s=t(23),c=r(s),l=t(24),u=r(l),d=t(25),f=r(d),p=t(32),h=r(p),_=t(38),v=r(_),m=t(27),g=r(m);t(40),t(42);var $=uploadcare.jQuery,b=function(){function e(t,r){(0,i["default"])(this,e),this.container=t,this.model=r,this.cropAndRotateView=new f["default"](t,r),this.enhanceView=new h["default"](t,r),this.sharpenView=new v["default"](t,r),this.CROP_AND_ROTATE_BTN_ID="cropAndRotateBtn_"+g["default"].Generate(),this.ENHANCE_BTN_ID="enhanceBtn_"+g["default"].Generate(),this.SHARPEN_BTN_ID="sharpenBtn_"+g["default"].Generate(),this.GRAYSCALE_BTN_ID="grayScaleBtn_"+g["default"].Generate(),this.DONE_BTN_ID="doneBtn_"+g["default"].Generate(),this.REMOVE_BTN_ID="removeBtn_"+g["default"].Generate()}return(0,a["default"])(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;this.container=e,this.viewDeferred&&"resolved"!==this.viewDeferred.state()||(this.viewDeferred=$.Deferred());var t={previewUrl:this.model.getPreviewUrl(800,382),cropAndRotateBtnId:this.CROP_AND_ROTATE_BTN_ID,enhanceBtnId:this.ENHANCE_BTN_ID,sharpenBtnId:this.SHARPEN_BTN_ID,grayscaleBtnId:this.GRAYSCALE_BTN_ID,doneBtn:this.DONE_BTN_ID,removeBtn:this.REMOVE_BTN_ID,appliedGrayscale:null===this.model.grayscale,appliedSharpen:!!this.model.sharp,appliedEnhance:!!this.model.enhance,appliedCar:!(!this.model.rotate&&!this.model.crop)},r=c["default"].render(u["default"],t);return e.html(r),this.setupHandlers(e),this.viewDeferred.promise()}},{key:"setupHandlers",value:function(e){var t=this;$(e).find("."+this.CROP_AND_ROTATE_BTN_ID).click(function(e){return t.cropAndRotateClick(e)}),$(e).find("."+this.ENHANCE_BTN_ID).click(function(e){return t.enhanceClick(e)}),$(e).find("."+this.SHARPEN_BTN_ID).click(function(e){return t.sharpenClick(e)}),$(e).find("."+this.GRAYSCALE_BTN_ID).click(function(e){return t.grayScaleClick(e)}),$(e).find("."+this.REMOVE_BTN_ID).click(function(e){return t.removeClick(e)}),$(e).find("."+this.DONE_BTN_ID).click(function(e){return t.doneClick(e)})}},{key:"cropAndRotateClick",value:function(e){var t=this;this.cropAndRotateView.render().then(function(e){t.render()})}},{key:"enhanceClick",value:function(e){var t=this;this.enhanceView.render().then(function(e){t.render()})}},{key:"sharpenClick",value:function(e){var t=this;this.sharpenView.render().then(function(e){t.render()})}},{key:"grayScaleClick",value:function(e){null===this.model.grayscale?this.model.grayscale=void 0:this.model.grayscale=null,this.render()}},{key:"doneClick",value:function(e){this.viewDeferred.resolve({reason:"Done"})}},{key:"removeClick",value:function(e){this.model.enhance=void 0,this.model.sharp=void 0,this.model.grayscale=void 0,this.model.rotate=void 0,this.model.crop=void 0,this.render()}}]),e}();exports["default"]=b},function(e,exports){"use strict";exports.__esModule=!0,exports["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0;var n=t(5),i=r(n);exports["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i["default"])(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,exports,t){e.exports={"default":t(6),__esModule:!0}},function(e,exports,t){t(7);var r=t(10).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,exports,t){var r=t(8);r(r.S+r.F*!t(18),"Object",{defineProperty:t(14).f})},function(e,exports,t){var r=t(9),n=t(10),i=t(11),o=t(13),a="prototype",s=function(e,t,c){var l,u,d,f=e&s.F,p=e&s.G,h=e&s.S,_=e&s.P,v=e&s.B,m=e&s.W,exports=p?n:n[t]||(n[t]={}),g=exports[a],b=p?r:h?r[t]:(r[t]||{})[a];p&&(c=t);for(l in c)u=!f&&b&&void 0!==b[l],u&&l in exports||(d=u?b[l]:c[l],exports[l]=p&&"function"!=typeof b[l]?c[l]:v&&u?i(d,r):m&&b[l]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[a]=e[a],t}(d):_&&"function"==typeof d?i(Function.call,d):d,_&&((exports.virtual||(exports.virtual={}))[l]=d,e&s.R&&g&&!g[l]&&o(g,l,d)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,exports){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,exports){var t=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)},function(e,exports,t){var r=t(12);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,exports){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,exports,t){var r=t(14),n=t(22);e.exports=t(18)?function(e,t,i){return r.f(e,t,n(1,i))}:function(e,t,r){return e[t]=r,e}},function(e,exports,t){var r=t(15),n=t(17),i=t(21),o=Object.defineProperty;exports.f=t(18)?Object.defineProperty:function(e,t,a){if(r(e),t=i(t,!0),r(a),n)try{return o(e,t,a)}catch(s){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},function(e,exports,t){var r=t(16);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,exports){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,exports,t){e.exports=!t(18)&&!t(19)(function(){return 7!=Object.defineProperty(t(20)("div"),"a",{get:function(){return 7}}).a})},function(e,exports,t){e.exports=!t(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,exports){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,exports,t){var r=t(16),n=t(9).document,i=r(n)&&r(n.createElement);e.exports=function(e){return i?n.createElement(e):{}}},function(e,exports,t){var r=t(16);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,exports){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,exports,t){var require,require;!function(t){e.exports=t()}(function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return require(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(require,e,exports){"use strict";function t(e,t){var r;if("/"==e.charAt(0))r=exports.resolveInclude(e.replace(/^\/*/,""),t.root||"/",!0);else{if(!t.filename)throw new Error("`include` use relative path requires the 'filename' option.");r=exports.resolveInclude(e,t.filename)}return r}function r(e,t){var r,n=e.filename,i=arguments.length>1;if(e.cache){if(!n)throw new Error("cache option requires a filename");if(r=exports.cache.get(n))return r;i||(t=c.readFileSync(n).toString().replace(g,""))}else if(!i){if(!n)throw new Error("Internal EJS error: no file name or template provided");t=c.readFileSync(n).toString().replace(g,"")}return r=exports.compile(t,e),e.cache&&exports.cache.set(n,r),r}function n(e,n){var i=u.shallowCopy({},n);return i.filename=t(e,i),r(i)}function i(e,r){var n,i,o=u.shallowCopy({},r);n=t(e,o),i=c.readFileSync(n).toString().replace(g,""),o.filename=n;var a=new s(i,o);return a.generateSource(),{source:a.source,filename:n,template:i}}function o(e,t,r,n){var i=t.split("\n"),o=Math.max(n-3,0),a=Math.min(i.length,n+3),s=i.slice(o,a).map(function(e,t){var r=t+o+1;return(r==n?" >> ":"    ")+r+"| "+e}).join("\n");throw e.path=r,e.message=(r||"ejs")+":"+n+"\n"+s+"\n\n"+e.message,e}function a(e,t){v.forEach(function(r){"undefined"!=typeof e[r]&&(t[r]=e[r])})}function s(e,t){t=t||{};var r={};this.templateText=e,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],r.client=t.client||!1,r.escapeFunction=t.escape||u.escapeXML,r.compileDebug=t.compileDebug!==!1,r.debug=!!t.debug,r.filename=t.filename,r.delimiter=t.delimiter||exports.delimiter||p,r.strict=t.strict||!1,r.context=t.context,r.cache=t.cache||!1,r.rmWhitespace=t.rmWhitespace,r.root=t.root,r.localsName=t.localsName||exports.localsName||h,r.strict?r._with=!1:r._with="undefined"==typeof t._with||t._with,this.opts=r,this.regex=this.createRegex()}/**
	 * @file Embedded JavaScript templating engine.
	 * @author Matthew Eernisse <mde@fleegix.org>
	 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
	 * @project EJS
	 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
	 */
var c=require("fs"),l=require("path"),u=require("./utils"),d=!1,f=require("../package.json").version,p="%",h="locals",_="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",v=["cache","filename","delimiter","scope","context","debug","compileDebug","client","_with","root","rmWhitespace","strict","localsName"],m=/;\s*$/,g=/^\uFEFF/;exports.cache=u.cache,exports.localsName=h,exports.resolveInclude=function(e,t,r){var n=l.dirname,i=l.extname,o=l.resolve,a=o(r?t:n(t),e),s=i(e);return s||(a+=".ejs"),a},exports.compile=function(e,t){var r;return t&&t.scope&&(d||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),d=!0),t.context||(t.context=t.scope),delete t.scope),r=new s(e,t),r.compile()},exports.render=function(e,t,n){var i=t||{},o=n||{};return 2==arguments.length&&a(i,o),r(o,e)(i)},exports.renderFile=function(){var e,t=Array.prototype.slice.call(arguments),n=t.shift(),i=t.pop(),o=t.shift()||{},s=t.pop()||{};s=u.shallowCopy({},s),3==arguments.length&&(o.settings&&o.settings["view options"]?a(o.settings["view options"],s):a(o,s)),s.filename=n;try{e=r(s)(o)}catch(c){return i(c)}return i(null,e)},exports.clearCache=function(){exports.cache.reset()},s.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},s.prototype={createRegex:function(){var e=_,t=u.escapeRegExpChars(this.opts.delimiter);return e=e.replace(/%/g,t),new RegExp(e)},compile:function(){var e,t,r=this.opts,i="",a="",s=r.escapeFunction;this.source||(this.generateSource(),i+="  var __output = [], __append = __output.push.bind(__output);\n",r._with!==!1&&(i+="  with ("+r.localsName+" || {}) {\n",a+="  }\n"),a+='  return __output.join("");\n',this.source=i+this.source+a),e=r.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(r.filename?JSON.stringify(r.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line);\n}\n":this.source,r.debug&&console.log(e),r.client&&(e="escape = escape || "+s.toString()+";\n"+e,r.compileDebug&&(e="rethrow = rethrow || "+o.toString()+";\n"+e)),r.strict&&(e='"use strict";\n'+e);try{t=new Function(r.localsName+", escape, include, rethrow",e)}catch(c){throw c instanceof SyntaxError&&(r.filename&&(c.message+=" in "+r.filename),c.message+=" while compiling ejs"),c}if(r.client)return t.dependencies=this.dependencies,t;var l=function(e){var i=function(t,i){var o=u.shallowCopy({},e);return i&&(o=u.shallowCopy(o,i)),n(t,r)(o)};return t.apply(r.context,[e||{},s,i,o])};return l.dependencies=this.dependencies,l},generateSource:function(){var e=this.opts;e.rmWhitespace&&(this.templateText=this.templateText.replace(/\r/g,"").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var t=this,r=this.parseTemplateText(),n=this.opts.delimiter;r&&r.length&&r.forEach(function(e,o){var a,s,c,l,d,f;if(0===e.indexOf("<"+n)&&0!==e.indexOf("<"+n+n)&&(s=r[o+2],s!=n+">"&&s!="-"+n+">"&&s!="_"+n+">"))throw new Error('Could not find matching close tag for "'+e+'".');return(c=e.match(/^\s*include\s+(\S+)/))&&(a=r[o-1],a&&(a=="<"+n||a=="<"+n+"-"||a=="<"+n+"_"))?(l=u.shallowCopy({},t.opts),d=i(c[1],l),f=t.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(d.template)+"\n      , __filename = "+JSON.stringify(d.filename)+";\n      try {\n"+d.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+d.source+"    ; }).call(this)\n",t.source+=f,void t.dependencies.push(exports.resolveInclude(c[1],l.filename))):void t.scanLine(e)})},parseTemplateText:function(){for(var e,t=this.templateText,r=this.regex,n=r.exec(t),i=[];n;)e=n.index,0!==e&&(i.push(t.substring(0,e)),t=t.slice(e)),i.push(n[0]),t=t.slice(n[0].length),n=r.exec(t);return t&&i.push(t),i},scanLine:function(e){function t(){r.truncate?(e=e.replace(/^(?:\r\n|\r|\n)/,""),r.truncate=!1):r.opts.rmWhitespace&&(e=e.replace(/^\n/,"")),e&&(e=e.replace(/\\/g,"\\\\"),e=e.replace(/\n/g,"\\n"),e=e.replace(/\r/g,"\\r"),e=e.replace(/"/g,'\\"'),r.source+='    ; __append("'+e+'")\n')}var r=this,n=this.opts.delimiter,i=0;switch(i=e.split("\n").length-1,e){case"<"+n:case"<"+n+"_":this.mode=s.modes.EVAL;break;case"<"+n+"=":this.mode=s.modes.ESCAPED;break;case"<"+n+"-":this.mode=s.modes.RAW;break;case"<"+n+"#":this.mode=s.modes.COMMENT;break;case"<"+n+n:this.mode=s.modes.LITERAL,this.source+='    ; __append("'+e.replace("<"+n+n,"<"+n)+'")\n';break;case n+n+">":this.mode=s.modes.LITERAL,this.source+='    ; __append("'+e.replace(n+n+">",n+">")+'")\n';break;case n+">":case"-"+n+">":case"_"+n+">":this.mode==s.modes.LITERAL&&t(),this.mode=null,this.truncate=0===e.indexOf("-")||0===e.indexOf("_");break;default:if(this.mode){switch(this.mode){case s.modes.EVAL:case s.modes.ESCAPED:case s.modes.RAW:e.lastIndexOf("//")>e.lastIndexOf("\n")&&(e+="\n")}switch(this.mode){case s.modes.EVAL:this.source+="    ; "+e+"\n";break;case s.modes.ESCAPED:this.source+="    ; __append(escape("+e.replace(m,"").trim()+"))\n";break;case s.modes.RAW:this.source+="    ; __append("+e.replace(m,"").trim()+")\n";break;case s.modes.COMMENT:break;case s.modes.LITERAL:t()}}else t()}r.opts.compileDebug&&i&&(this.currentLine+=i,this.source+="    ; __line = "+this.currentLine+"\n")}},exports.escapeXML=u.escapeXML,exports.__express=exports.renderFile,require.extensions&&(require.extensions[".ejs"]=function(e,t){var r=t||e.filename,n={filename:r,client:!0},i=c.readFileSync(r).toString(),o=exports.compile(i,n);e._compile("module.exports = "+o.toString()+";",r)}),exports.VERSION=f,"undefined"!=typeof window&&(window.ejs=exports)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(require,e,exports){"use strict";function t(e){return n[e]||e}var r=/[|\\{}()[\]^$+*?.]/g;exports.escapeRegExpChars=function(e){return e?String(e).replace(r,"\\$&"):""};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},i=/[&<>\'"]/g,o='var _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n';exports.escapeXML=function(e){return void 0==e?"":String(e).replace(i,t)},exports.escapeXML.toString=function(){return Function.prototype.toString.call(this)+";\n"+o},exports.shallowCopy=function(e,t){t=t||{};for(var r in t)e[r]=t[r];return e},exports.cache={_data:{},set:function(e,t){this._data[e]=t},get:function(e){return this._data[e]},reset:function(){this._data={}}}},{}],3:[function(require,e,exports){},{}],4:[function(require,e,exports){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return n.exec(e).slice(1)};exports.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+n||"."},exports.normalize=function(e){var n=exports.isAbsolute(e),i="/"===o(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!n).join("/"),e||n||(e="."),e&&i&&(e+="/"),(n?"/":"")+e},exports.isAbsolute=function(e){return"/"===e.charAt(0)},exports.join=function(){var e=Array.prototype.slice.call(arguments,0);return exports.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},exports.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=exports.resolve(e).substr(1),t=exports.resolve(t).substr(1);for(var n=r(e.split("/")),i=r(t.split("/")),o=Math.min(n.length,i.length),a=o,s=0;s<o;s++)if(n[s]!==i[s]){a=s;break}for(var c=[],s=a;s<n.length;s++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(e){var t=i(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},exports.basename=function(e,t){var r=i(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},exports.extname=function(e){return i(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,require("_process"))},{_process:5}],5:[function(require,e,exports){function t(){if(!o){o=!0;for(var e,t=i.length;t;){e=i,i=[];for(var r=-1;++r<t;)e[r]();t=i.length}o=!1}}function r(){}var n=e.exports={},i=[],o=!1;n.nextTick=function(e){i.push(e),o||setTimeout(t,0)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],6:[function(require,e,exports){e.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.5.1",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.0.1",eslint:"^3.0.0",istanbul:"~0.4.3",jake:"^8.0.0",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^3.0.2",rimraf:"^2.2.8","uglify-js":"^2.6.2"},engines:{node:">=0.10.0"},scripts:{test:"mocha",coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"rimraf out && jsdoc -c jsdoc.json lib/* docs/jsdoc/*",devdoc:"rimraf out && jsdoc -p -c jsdoc.json lib/* docs/jsdoc/*"}}},{}]},{},[1])(1)})},function(e,exports){e.exports='<div class="uploadcare--panel__header">\r\n\t<div class="uploadcare--panel__title uploadcare--preview__title">\r\n\t\tPreview<!-- TODO Take word from locale -->\r\n\t</div>\r\n</div>\r\n\r\n<div class="uploadcare--panel__content">\r\n\t<div class="uploadcare--preview__image-container">\r\n\t\t<img src="<%= previewUrl %>" alt="" class="uploadcare--preview__image"/>\r\n\t</div>\r\n</div>\r\n\r\n<div class="uploadcare--panel__footer">\r\n\t<div class="uploadcare--button uploadcare--button_outline-secondary uploadcare--preview__back <%= removeBtn %>"\r\n\t\t\t tabindex="0" role="button"\r\n\t>Cancel<!-- TODO Take word from locale --></div>\r\n\r\n\t<div class="uploadcare--panel__footer-additions">\r\n\t\t<div class="uploadcare-tab-effects--effect-buttons">\r\n\t\t\t<div class="uploadcare-tab-effects--effect-button <% if(appliedCar) { %>uploadcare-tab-effects--effect-button_applied<% } %> <%= cropAndRotateBtnId %>">\r\n\t\t\t\t<svg width="29" height="28" viewBox="0 0 29 28" xmlns="http://www.w3.org/2000/svg"><g stroke="#000" fill="none" fill-rule="evenodd" class="svg-stroke"><path d="M7.5 28V7h21"/><path d="M21 0v21H0"/></g></svg>\r\n\t\t\t\t<div class="uploadcare-tab-effects--effect-button__caption">Crop &amp; Rotate<!-- TODO Take word from locale --></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="uploadcare-tab-effects--effect-button <% if(appliedEnhance) { %>uploadcare-tab-effects--effect-button_applied<% } %> <%= enhanceBtnId %>">\r\n\t\t\t\t<svg width="21" height="21" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g stroke="#000" fill="none" fill-rule="evenodd" class="svg-stroke"><path d="M11.616 11.037c-5.015 3.843-1 8.997-1 8.997 5.311 0 9.616-4.26 9.616-9.517C20.232 5.261 15.927 1 10.616 1c0 0 6.016 6.194 1 10.037z" fill="#000" class="svg-fill"/><path d="M10.616 1C5.306 1 1 5.261 1 10.517c0 5.256 4.305 9.517 9.616 9.517"/></g></svg>\r\n\t\t\t\t<div class="uploadcare-tab-effects--effect-button__caption">Enhance<!-- TODO Take word from locale --></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="uploadcare-tab-effects--effect-button <% if(appliedSharpen) { %>uploadcare-tab-effects--effect-button_applied<% } %> <%= sharpenBtnId %>">\r\n\t\t\t\t<svg width="26" height="22" viewBox="0 0 26 22" xmlns="http://www.w3.org/2000/svg"><g stroke="#000" fill="none" fill-rule="evenodd" stroke-linejoin="round" class="svg-stroke"><path d="M13 22L25 1H1z"/></g></svg>\r\n\t\t\t\t<div class="uploadcare-tab-effects--effect-button__caption">Sharpen<!-- TODO Take word from locale --></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="uploadcare-tab-effects--effect-button <% if(appliedGrayscale) { %>uploadcare-tab-effects--effect-button_applied<% } %> <%= grayscaleBtnId %>">\r\n\t\t\t\t<svg width="21" height="21" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><g stroke="#000" fill="none" fill-rule="evenodd" class="svg-stroke"><path d="M10.616 20.034c5.311 0 9.616-4.26 9.616-9.517C20.232 5.261 15.927 1 10.616 1" fill="#000" class="svg-fill"/><path d="M10.616 1C5.306 1 1 5.261 1 10.517c0 5.256 4.305 9.517 9.616 9.517"/></g></svg>\r\n\t\t\t\t<div class="uploadcare-tab-effects--effect-button__caption">Grayscale<!-- TODO Take word from locale --></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="uploadcare--button uploadcare--button_primary uploadcare--preview__done <%= doneBtn %>"\r\n\t\t\t tabindex="0" role="button"\r\n\t>Done<!-- TODO Take word from locale --></div>\r\n</div>\r\n'},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(3),i=r(n),o=t(4),a=r(o),s=t(23),c=r(s),l=t(26),u=r(l),d=t(27),f=r(d);t(28);var $=uploadcare.jQuery,p=function(){function e(t,r){(0,i["default"])(this,e),this.container=t,this.model=r,this.cropApi=null,this.CAR_APPLY_BTN_ID="carApplyBtn"+f["default"].Generate(),this.CAR_CANCEL_BTN_ID="carCancelBtn"+f["default"].Generate(),this.CAR_FREE_RATIO_BTN_ID="carFreeRatioBtn"+f["default"].Generate(),this.CAR_ORIG_RATIO_BTN_ID="carOrigRatioBtn"+f["default"].Generate(),this.CAR_ONE_TO_ONE_RATIO_BTN_ID="carOneToOneRatioBtn"+f["default"].Generate(),this.CAR_THREE_TO_FOUR_RATIO_BTN_ID="carThreeToFourRatioBtn"+f["default"].Generate(),this.CAR_FOUR_TO_THREE_RATIO_BTN_ID="carFourToThreeRatioBtn"+f["default"].Generate(),this.CAR_SIXTEEN_TO_NINE_RATIO_BTN_ID="carSixteenToNineRatioBtn"+f["default"].Generate(),this.CAR_NINE_TO_SIXTEEN_RATIO_BTN_ID="carNineToSixteenRatioBtn"+f["default"].Generate(),this.CAR_ROTATE_LEFT_BTN="carRotateLeftBtn"+f["default"].Generate(),this.CAR_ROTATE_RIGHT_BTN="carRotateRightBtn"+f["default"].Generate(),this.cropPos=this.model.getCropPos(),this.cropSize=this.model.getCropSize(),this.freeCropFlag=!!this.cropPos.y,this.model.rotate&&(this.rotateFlag=!0),this.cropConsts={ORIG_RATIO:"original",FREE_CROP:"freeCrop",ONE_TO_ONE:"1:1",THREE_TO_FOUR:"3:4",FOUR_TO_THREE:"4:3",SIXTEEN_TO_NINE:"16:9",NINE_TO_SIXTEEN:"9:16"}}return(0,a["default"])(e,[{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;this.viewDeferred&&"resolved"!==this.viewDeferred.state()||(this.viewDeferred=$.Deferred()),this.container=t,this.freeCropFlag&&(this.model.crop=void 0);var r=this.getCropConst(),n={previewUrl:this.model.getPreviewUrl(800,382),carApplyBtn:this.CAR_APPLY_BTN_ID,carCancelBtn:this.CAR_CANCEL_BTN_ID,carRotateLeftBtn:this.CAR_ROTATE_LEFT_BTN,carRotateRightBtn:this.CAR_ROTATE_RIGHT_BTN,rotateFlag:!!this.model.rotate,freeCropFlag:this.freeCropFlag,carOrigRatioBtn:this.CAR_ORIG_RATIO_BTN_ID,carOneToOneRatioBtn:this.CAR_ONE_TO_ONE_RATIO_BTN_ID,carThreeToFourRatioBtn:this.CAR_THREE_TO_FOUR_RATIO_BTN_ID,carFourToThreeRatioBtn:this.CAR_FOUR_TO_THREE_RATIO_BTN_ID,carSixteenToNineRatioBtn:this.CAR_SIXTEEN_TO_NINE_RATIO_BTN_ID,carNineToSixteenRatioBtn:this.CAR_NINE_TO_SIXTEEN_RATIO_BTN_ID,carFreeRatioBtn:this.CAR_FREE_RATIO_BTN_ID,cropRatio:r,cropRatioConsts:this.cropConsts},i=c["default"].render(u["default"],n);return t.html(i),this.crop_img=$(t).find(".uploadcare--preview__image-container>img"),this.crop_img.on("load",function(){if(e.freeCropFlag){var t=[e.model.imgWidth,e.model.imgHeight],r=e.model.rotate;if(90!==r&&270!==r||(t=t.reverse()),e.cropApi=$.Jcrop(e.crop_img,{trueSize:t,onChange:function(t){var r=t,n=Math.round(Math.max(0,r.x)),i=Math.round(Math.max(0,r.y)),o=Math.round(Math.min(e.model.imgWidth,r.x2))-n,a=Math.round(Math.min(e.model.imgHeight,r.y2))-i;e.model.rotate;e.cropPos.x=n,e.cropPos.y=i,e.cropSize.width=o,e.cropSize.height=a},baseClass:"uploadcare--jcrop",addClass:"uploadcare--crop-widget",createHandles:["nw","ne","se","sw"],bgColor:"transparent",bgOpacity:.8}),e.cropPos.x&&e.cropPos.y){var n=[e.cropPos.x,e.cropPos.y,e.cropPos.x+e.cropSize.width,e.cropPos.y+e.cropSize.height];e.cropApi.setSelect(n)}}else e.cropApi=void 0}),this.setupHandlers(t),this.viewDeferred.promise()}},{key:"setupHandlers",value:function(e){var t=this;$(e).find("."+this.CAR_CANCEL_BTN_ID).click(function(e){return t.carCancelClick(e)}),$(e).find("."+this.CAR_FREE_RATIO_BTN_ID).click(function(e){return t.carFreeRatio()}),$(e).find("."+this.CAR_APPLY_BTN_ID).click(function(e){return t.carApplyClick(e)}),$(e).find("."+this.CAR_ROTATE_LEFT_BTN).click(function(e){return t.carRotateClick(1)}),$(e).find("."+this.CAR_ROTATE_RIGHT_BTN).click(function(e){return t.carRotateClick(0)}),$(e).find("."+this.CAR_ORIG_RATIO_BTN_ID).click(function(e){return t.carSetCropRatio(null)}),$(e).find("."+this.CAR_ONE_TO_ONE_RATIO_BTN_ID).click(function(e){return t.carSetCropRatio(1)}),$(e).find("."+this.CAR_THREE_TO_FOUR_RATIO_BTN_ID).click(function(e){return t.carSetCropRatio(.75)}),$(e).find("."+this.CAR_FOUR_TO_THREE_RATIO_BTN_ID).click(function(e){return t.carSetCropRatio(4/3)}),$(e).find("."+this.CAR_SIXTEEN_TO_NINE_RATIO_BTN_ID).click(function(e){return t.carSetCropRatio(16/9)}),$(e).find("."+this.CAR_NINE_TO_SIXTEEN_RATIO_BTN_ID).click(function(e){return t.carSetCropRatio(9/16)})}},{key:"carCancelClick",value:function(e){this.model.rotate=void 0,this.model.crop=void 0,this.freeCropFlag=!1,this.viewDeferred.resolve({reason:"Cancel"})}},{key:"carApplyClick",value:function(e){this.freeCropFlag&&(this.model.setCropSize(this.cropSize.width,this.cropSize.height),this.model.setCropPos(this.cropPos.x,this.cropPos.y)),this.viewDeferred.resolve({reason:"Apply"})}},{key:"carRotateClick",value:function(e){var t=[void 0,90,180,270],r=this.model.rotate,n=t.findIndex(function(e,t,n){return e===r});e?(n++,n>=t.length&&(n=0)):(n--,n<0&&(n=t.length-1)),this.model.rotate=t[n],this.render()}},{key:"carSetCropRatio",value:function(e){if(this.freeCropFlag=!1,e)if(1===e){var t=Math.min(this.model.imgWidth,this.model.imgHeight);this.model.setCropSize(t,t)}else{var r=Math.min(this.model.imgWidth,this.model.imgHeight),n=this.model.imgWidth/this.model.imgHeight;n>1?e<n?this.model.setCropSize(e*r,r):this.model.setCropSize(r,1/e*r):e>n?this.model.setCropSize(r,1/e*r):this.model.setCropSize(e*r,r)}else this.model.crop=void 0;this.render()}},{key:"carFreeRatio",value:function(){this.freeCropFlag=!0,this.model.crop=void 0,this.render()}},{key:"getCropConst",value:function(){var e=this.model.getCropSize(),t=Math.round(e.width/e.height*100)/100,r=Math.round(75)/100,n=Math.round(4/3*100)/100,i=Math.round(16/9*100)/100,o=Math.round(56.25)/100;return this.freeCropFlag?this.cropConsts.FREE_CROP:this.crop||this.cropSize?1===t?this.cropConsts.ONE_TO_ONE:t==n?this.cropConsts.FOUR_TO_THREE:t==r?this.cropConsts.THREE_TO_FOUR:t==i?this.cropConsts.SIXTEEN_TO_NINE:t==o?this.cropConsts.NINE_TO_SIXTEEN:this.cropConsts.ORIG_RATIO:this.cropConsts.ORIG_RATIO}}]),e}();exports["default"]=p},function(e,exports){e.exports='<div class="uploadcare--panel__header">\r\n\t<div class="uploadcare--panel__title uploadcare--preview__title">\r\n\t\tCrop & Rotate<!-- TODO Take word from locale -->\r\n\t</div>\r\n</div>\r\n\r\n<div class="uploadcare--panel__content">\r\n\t<div class="uploadcare--preview__image-container">\r\n\t\t<img src="<%= previewUrl %>" alt="" class="uploadcare--preview__image"/>\r\n\t</div>\r\n</div>\r\n\r\n<div class="uploadcare--panel__footer uploadcare--panel__footer_inverted">\r\n\t<div class="uploadcare--button uploadcare--button_outline-secondary uploadcare--preview__back <%= carCancelBtn %>"\r\n\t\t\t tabindex="0" role="button"\r\n\t>Cancel<!-- TODO Take word from locale --></div>\r\n\r\n\t<div class="uploadcare--panel__footer-additions">\r\n\t\t<div role="button" class="uploadcare-tab-effects--rotate-button <%= carRotateLeftBtn %> <% if(rotateFlag) {%> uploadcare-tab-effects--rotate-button_current <%}%>">\r\n\r\n\t\t\t<svg width="29" height="25" viewBox="0 0 29 25" xmlns="http://www.w3.org/2000/svg"><g stroke="#000" fill="none" fill-rule="evenodd"><path d="M5 12.5C5 6.149 10.149 1 16.5 1S28 6.149 28 12.5 22.851 24 16.5 24"/><path d="M9 9l-4 4-4-4"/></g></svg>\r\n\t\t</div>\r\n\r\n\t\t<div class="uploadcare--crop-sizes">\r\n\t\t\t<div class="uploadcare--crop-sizes__item <%= carFreeRatioBtn %> <% if(cropRatio === cropRatioConsts.FREE_CROP) {%>uploadcare--crop-sizes__item_current<%}%>" data-caption="free">\r\n\t\t\t\t<div class="uploadcare--crop-sizes__icon uploadcare--crop-sizes__icon_free"></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="uploadcare--crop-sizes__item <%= carOrigRatioBtn %> <% if(cropRatio === cropRatioConsts.ORIG_RATIO) {%>uploadcare--crop-sizes__item_current<%}%>" data-caption="Orig">\r\n\t\t\t\t<div class="uploadcare--crop-sizes__icon"></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="uploadcare--crop-sizes__item <%= carOneToOneRatioBtn %> <% if(cropRatio === cropRatioConsts.ONE_TO_ONE) {%>uploadcare--crop-sizes__item_current<%}%>" data-caption="1:1">\r\n\t\t\t\t<div class="uploadcare--crop-sizes__icon" style="width: 30px; height: 30px;"></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="uploadcare--crop-sizes__item <%= carThreeToFourRatioBtn %> <% if(cropRatio === cropRatioConsts.THREE_TO_FOUR) {%>uploadcare--crop-sizes__item_current<%}%>" data-caption="3:4">\r\n\t\t\t\t<div class="uploadcare--crop-sizes__icon" style="width: 23px; height: 30px;"></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="uploadcare--crop-sizes__item <%= carFourToThreeRatioBtn %> <% if(cropRatio === cropRatioConsts.FOUR_TO_THREE) {%>uploadcare--crop-sizes__item_current<%}%>" data-caption="4:3">\r\n\t\t\t\t<div class="uploadcare--crop-sizes__icon" style="width: 30px; height: 23px;"></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="uploadcare--crop-sizes__item <%= carSixteenToNineRatioBtn %> <% if(cropRatio === cropRatioConsts.SIXTEEN_TO_NINE) {%>uploadcare--crop-sizes__item_current<%}%>" data-caption="16:9">\r\n\t\t\t\t<div class="uploadcare--crop-sizes__icon" style="width: 30px; height: 17px;"></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="uploadcare--crop-sizes__item <%= carNineToSixteenRatioBtn %> <% if(cropRatio === cropRatioConsts.NINE_TO_SIXTEEN) {%>uploadcare--crop-sizes__item_current<%}%>" data-caption="9:16">\r\n\t\t\t\t<div class="uploadcare--crop-sizes__icon" style="width: 20px; height: 30px;"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div role="button" class="uploadcare-tab-effects--rotate-button <%= carRotateRightBtn %> <% if(rotateFlag) {%> uploadcare-tab-effects--rotate-button_current <%}%>">\r\n\t\t\t<svg width="29" height="25" viewBox="0 0 29 25" xmlns="http://www.w3.org/2000/svg"><g stroke="#000" fill="none" fill-rule="evenodd"><path d="M24 12.5C24 6.149 18.851 1 12.5 1S1 6.149 1 12.5 6.149 24 12.5 24"/><path d="M20 9l4 4 4-4"/></g></svg>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="uploadcare--button uploadcare--button_primary uploadcare--preview__done <%= carApplyBtn %>"\r\n\t\t\t tabindex="0" role="button"\r\n\t>Done<!-- TODO Take word from locale --></div>\r\n</div>\r\n'},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={Generate:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}},function(e,exports,t){var r=t(29);"string"==typeof r&&(r=[[e.id,r,""]]);t(31)(r,{});r.locals&&(e.exports=r.locals)},function(e,exports,t){exports=e.exports=t(30)(),exports.push([e.id,".uploadcare-tab-effects--rotate-button{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:60px}.uploadcare-tab-effects--rotate-button svg g{stroke:#454545}.uploadcare-tab-effects--rotate-button:focus svg g,.uploadcare-tab-effects--rotate-button:hover svg g{stroke:#282828}.uploadcare-tab-effects--rotate-button:active svg g{stroke:#000}.uploadcare-tab-effects--rotate-button_current{position:relative}.uploadcare-tab-effects--rotate-button_current:before{content:'';display:block;position:absolute;top:100%;left:50%;width:6px;height:6px;background:#3787ec;border-radius:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}",""])},function(e,exports){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(e,exports,t){function r(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=u[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(a(n.parts[o],t))}else{for(var s=[],o=0;o<n.parts.length;o++)s.push(a(n.parts[o],t));u[n.id]={id:n.id,refs:1,parts:s}}}}function n(e){for(var t=[],r={},n=0;n<e.length;n++){var i=e[n],o=i[0],a=i[1],s=i[2],c=i[3],l={css:a,media:s,sourceMap:c};r[o]?r[o].parts.push(l):t.push(r[o]={id:o,parts:[l]})}return t}function i(){var e=document.createElement("style"),t=p();return e.type="text/css",t.appendChild(e),e}function o(){var e=document.createElement("link"),t=p();return e.rel="stylesheet",t.appendChild(e),e}function a(e,t){var r,n,a;if(t.singleton){var u=_++;r=h||(h=i()),n=s.bind(null,r,u,!1),a=s.bind(null,r,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=o(),n=l.bind(null,r),a=function(){r.parentNode.removeChild(r),r.href&&URL.revokeObjectURL(r.href)}):(r=i(),n=c.bind(null,r),a=function(){r.parentNode.removeChild(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}function s(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function c(e,t){var r=t.css,n=t.media;t.sourceMap;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function l(e,t){var r=t.css,n=(t.media,t.sourceMap);n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var i=new Blob([r],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var u={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},f=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),p=d(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,_=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=f());var i=n(e);return r(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var s=i[a],c=u[s.id];c.refs--,o.push(c)}if(e){var l=n(e);r(l,t)}for(var a=0;a<o.length;a++){var c=o[a];if(0===c.refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete u[c.id]}}}};var v=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(3),i=r(n),o=t(4),a=r(o),s=t(23),c=r(s),l=t(33),u=r(l),d=t(34),f=r(d),p=t(27),h=r(p);t(36);var $=uploadcare.jQuery,_=function(){function e(t,r){var n=this;(0,i["default"])(this,e),this.container=t,this.model=r,this.slider=new f["default"],this.slider.onChange(function(e){return n.onChangeSlider(e)}),this.SLIDER_ID="slider_"+h["default"].Generate(),this.PREVIEW_IMG_ID="preview_mage_"+h["default"].Generate(),this.ENHANCE_APPLY_BTN_ID="enhanceApplyBtn_"+h["default"].Generate(),this.ENHANCE_CANCEL_BTN_ID="enhanceCancelBtn_"+h["default"].Generate()}return(0,a["default"])(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;this.viewDeferred&&"resolved"!==this.viewDeferred.state()||(this.viewDeferred=$.Deferred()),this.container=e;var t={previewUrl:this.model.getPreviewUrl(800,382),sliderId:this.SLIDER_ID,previewImageId:this.PREVIEW_IMG_ID,enhanceApplyBtn:this.ENHANCE_APPLY_BTN_ID,enhanceCancelBtn:this.ENHANCE_CANCEL_BTN_ID},r=c["default"].render(u["default"],t);e.html(r);var n=$(e).find("."+this.SLIDER_ID);return this.slider.render(n,this.model.enhance),this.setupHandlers(e),this.viewDeferred.promise()}},{key:"setupHandlers",value:function(e){var t=this;$(e).find("."+this.ENHANCE_CANCEL_BTN_ID).click(function(e){return t.enhanceCancelClick(e)}),$(e).find("."+this.ENHANCE_APPLY_BTN_ID).click(function(e){return t.enhanceApplyClick(e)})}},{key:"enhanceCancelClick",value:function(e){this.model.enhance=void 0,this.viewDeferred.resolve({reason:"Cancel"})}},{key:"enhanceApplyClick",value:function(e){this.viewDeferred.resolve({reason:"Apply"})}},{key:"onChangeSlider",value:function(e){var t=this;this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){t.model.enhance=e,t.container.find("."+t.PREVIEW_IMG_ID).attr("src",t.model.getPreviewUrl(800,382))},300)}}]),e}();exports["default"]=_},function(e,exports){e.exports='<div class="uploadcare--panel__header">\r\n\t<div class="uploadcare--panel__title uploadcare--preview__title">\r\n\t\tEnhance<!-- TODO Take word from locale -->\r\n\t</div>\r\n</div>\r\n\r\n<div class="uploadcare--panel__content">\r\n\t<div class="uploadcare--preview__image-container">\r\n\t\t<img src="<%= previewUrl %>" alt="" class="uploadcare--preview__image <%= previewImageId%>"/>\r\n\t</div>\r\n</div>\r\n\r\n<div class="uploadcare--panel__footer uploadcare--panel__footer_inverted">\r\n\t<div class="uploadcare--button uploadcare--button_outline-secondary uploadcare--preview__back <%= enhanceCancelBtn %>"\r\n\t\t\t tabindex="0" role="button" \r\n\t>Cancel<!-- TODO Take word from locale --></div>\r\n\r\n\t<div class="uploadcare--panel__footer-additions">\r\n\t\t<div class="uploadcare-tab-effects--slider <%= sliderId %>"></div>\r\n\t</div>\r\n\r\n\t<div class="uploadcare--button uploadcare--button_primary uploadcare--preview__done <%= enhanceApplyBtn %>"\r\n\t\t\t tabindex="0" role="button"\r\n\t>Done<!-- TODO Take word from locale --></div>\r\n</div>\r\n'},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(3),i=r(n),o=t(4),a=r(o),s=t(23),c=r(s),l=t(35),u=r(l),d=t(27),f=r(d),$=uploadcare.jQuery,p=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;(0,i["default"])(this,e),this.container=t,this.onChangeHandler=null,this.maxValue=r,this.RANGE_ID="range_"+f["default"].Generate();
}return(0,a["default"])(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.container=e;var r=c["default"].render(u["default"],{pointerId:this.RANGE_ID,min:0,max:this.maxValue,value:t});e.html(r),this.setupHandlers(e)}},{key:"setupHandlers",value:function(e){var t=this;this.$range=$(e).find("."+this.RANGE_ID),this.$range.on("change",function(e){return t.change(e)})}},{key:"change",value:function(e){this.onChangeHandler&&this.onChangeHandler(e.currentTarget.value)}},{key:"onChange",value:function(e){this.onChangeHandler=e}}]),e}();exports["default"]=p},function(e,exports){e.exports='<input type="range" class="uploadcare--input-range <%= pointerId %>" min="<%= min %>" max="<%= max %>" value="<%= value %>"/>'},function(e,exports,t){var r=t(37);"string"==typeof r&&(r=[[e.id,r,""]]);t(31)(r,{});r.locals&&(e.exports=r.locals)},function(e,exports,t){exports=e.exports=t(30)(),exports.push([e.id,".uploadcare-tab-effects--slider{-webkit-box-flex:1;-ms-flex:1;flex:1}",""])},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(3),i=r(n),o=t(4),a=r(o),s=t(23),c=r(s),l=t(39),u=r(l),d=t(34),f=r(d),p=t(27),h=r(p);t(36);var $=uploadcare.jQuery,_=function(){function e(t,r){var n=this;(0,i["default"])(this,e),this.container=t,this.model=r,this.slider=new f["default"](null,20),this.slider.onChange(function(e){return n.onChangeSlider(e)}),this.SLIDER_ID="slider_"+h["default"].Generate(),this.PREVIEW_IMG_ID="preview_mage_"+h["default"].Generate(),this.SHARPEN_APPLY_BTN_ID="sharpenApplyBtn"+ +h["default"].Generate(),this.SHARPEN_CANCEL_BTN_ID="sharpenCancelBtn"+ +h["default"].Generate()}return(0,a["default"])(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;this.viewDeferred&&"resolved"!==this.viewDeferred.state()||(this.viewDeferred=$.Deferred()),this.container=e;var t={previewUrl:this.model.getPreviewUrl(800,382),sliderId:this.SLIDER_ID,previewImageId:this.PREVIEW_IMG_ID,sharpenApplyBtn:this.SHARPEN_APPLY_BTN_ID,sharpenCancelBtn:this.SHARPEN_CANCEL_BTN_ID},r=c["default"].render(u["default"],t);e.html(r);var n=$(e).find("."+this.SLIDER_ID);return this.slider.render(n,this.model.sharp),this.setupHandlers(e),this.viewDeferred.promise()}},{key:"setupHandlers",value:function(e){var t=this;$(e).find("."+this.SHARPEN_CANCEL_BTN_ID).click(function(e){return t.sharpenCancelClick(e)}),$(e).find("."+this.SHARPEN_APPLY_BTN_ID).click(function(e){return t.sharpenApplyClick(e)})}},{key:"sharpenCancelClick",value:function(e){this.model.sharp=void 0,this.viewDeferred.resolve({reason:"Cancel"})}},{key:"sharpenApplyClick",value:function(e){this.viewDeferred.resolve({reason:"Apply"})}},{key:"onChangeSlider",value:function(e){var t=this;this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){t.model.sharp=e,t.container.find("."+t.PREVIEW_IMG_ID).attr("src",t.model.getPreviewUrl(800,382))},300)}}]),e}();exports["default"]=_},function(e,exports){e.exports='<div class="uploadcare--panel__header">\r\n\t<div class="uploadcare--panel__title uploadcare--preview__title">\r\n\t\tSharpen<!-- TODO Take word from locale -->\r\n\t</div>\r\n</div>\r\n\r\n<div class="uploadcare--panel__content">\r\n\t<div class="uploadcare--preview__image-container">\r\n\t\t<img src="<%= previewUrl %>" alt="" class="uploadcare--preview__image <%= previewImageId%>"/>\r\n\t</div>\r\n</div>\r\n\r\n<div class="uploadcare--panel__footer uploadcare--panel__footer_inverted">\r\n\t<div class="uploadcare--button uploadcare--button_outline-secondary uploadcare--preview__back <%= sharpenCancelBtn %>"\r\n\t\t\t tabindex="0" role="button"\r\n\t>Cancel<!-- TODO Take word from locale --></div>\r\n\r\n\t<div class="uploadcare--panel__footer-additions">\r\n\t\t<div class="uploadcare-tab-effects--slider <%= sliderId %>"></div>\r\n\t</div>\r\n\r\n\t<div class="uploadcare--button uploadcare--button_primary uploadcare--preview__done <%= sharpenApplyBtn %>"\r\n\t\t\t tabindex="0" role="button"\r\n\t>Done<!-- TODO Take word from locale --></div>\r\n</div>\r\n'},function(e,exports,t){var r=t(41);"string"==typeof r&&(r=[[e.id,r,""]]);t(31)(r,{});r.locals&&(e.exports=r.locals)},function(e,exports,t){exports=e.exports=t(30)(),exports.push([e.id,".uploadcare-tab-effects--effect-buttons{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}",""])},function(e,exports,t){var r=t(43);"string"==typeof r&&(r=[[e.id,r,""]]);t(31)(r,{});r.locals&&(e.exports=r.locals)},function(e,exports,t){exports=e.exports=t(30)(),exports.push([e.id,".uploadcare-tab-effects--effect-button{-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;height:45px;color:#454545}.uploadcare-tab-effects--effect-button .svg-stroke{stroke:#454545}.uploadcare-tab-effects--effect-button .svg-fill{fill:#454545}.uploadcare-tab-effects--effect-button:focus,.uploadcare-tab-effects--effect-button:hover{color:#282828}.uploadcare-tab-effects--effect-button:focus .svg-stroke,.uploadcare-tab-effects--effect-button:hover .svg-stroke{stroke:#282828}.uploadcare-tab-effects--effect-button:focus .svg-fill,.uploadcare-tab-effects--effect-button:hover .svg-fill{fill:#282828}.uploadcare-tab-effects--effect-button:active{color:#000}.uploadcare-tab-effects--effect-button:active .svg-stroke{stroke:#000}.uploadcare-tab-effects--effect-button:active .svg-fill{fill:#000}.uploadcare-tab-effects--effect-button_applied{position:relative}.uploadcare-tab-effects--effect-button_applied:before{content:'';display:block;position:absolute;top:calc(100% + 3px);left:50%;width:6px;height:6px;background:#3787ec;border-radius:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.uploadcare-tab-effects--effect-button__caption{font-size:13px;line-height:15px;text-transform:uppercase;margin-top:5px}",""])},function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){function n(e){return{enumerable:!0,set:function(t){T[e]=t;var r=b.indexOf(e);return void 0===t?r!==-1&&b.splice(r,1):r===-1?b.push(e):(b.splice(r,1),b.push(e)),t},get:function(){return T[e]}}}this.cdn_url=e,this.imgWidth=t,this.imgHeight=r;var i=void 0,b=[],T={};(0,o["default"])(this,a,n(a)),(0,o["default"])(this,s,n(s)),(0,o["default"])(this,c,n(c)),(0,o["default"])(this,l,n(l)),(0,o["default"])(this,u,n(u)),(0,o["default"])(this,d,n(d)),(0,o["default"])(this,f,n(f)),(0,o["default"])(this,p,n(p)),(0,o["default"])(this,h,n(h)),(0,o["default"])(this,_,n(_)),(0,o["default"])(this,v,n(v)),(0,o["default"])(this,m,n(m)),(0,o["default"])(this,g,n(g)),this.parseUrl=function(e){if("string"!=typeof e)throw new Error("`url` param can be only a string");var t=e.split("-/"),r=t[0],n=r.split(this.cdn_url);this.protocol=n[0].split("://")[0],this.imageId=n[1].split("/")[0];for(var i=1;i<t.length;i++)this.parseValue(t[i])},this.parseValue=function(e){var t=e.split("/");if(t[0]==g)this[t[0]]=t[1]?t[1]:null,i=t[2]?t[2]:void 0;else try{this[t[0]]=t[1]?parseInt(t[1],10):null}catch(r){this[t[0]]=t[1]?t[1]:null}b.indexOf(t[0])===-1&&b.push(t[0])},this.getFinalUrl=function(){var e=this.protocol+"://"+this.cdn_url+this.imageId+"/";return uploadcare.jQuery.each(b,function(t,r){void 0!==T[r]&&(e+="-/"+r+"/",T[r]&&(e+=T[r]+"/")),r===g&&T[r]&&(e+=i?i+"/":"center/")}),e},this.getPreviewUrl=function(e,t){var r=this.getFinalUrl()+"-/preview/";return e&&(r+=e),t&&(r+="x"+t),(e||t)&&(r+="/"),r},this.setCropSize=function(e,t){this[g]=Math.round(e)+"x"+Math.round(t),i=void 0},this.getCropSize=function(){var e=this[g]?this[g].split("x"):[];return{width:e[0]?parseInt(e[0],10):null,height:e[1]?parseInt(e[1],10):null}},this.setCropPosCenter=function(){i="center"},this.setCropPos=function(e,t){i=e+","+t},this.getCropPos=function(){var e=i?i.split(","):[];return{x:e[0]?parseInt(e[0],10):null,y:e[1]?parseInt(e[1],10):null}}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(5),o=r(i);exports["default"]=n;var a="format",s="progressive",c="quality",l="rotate",u="autorotate",d="flip",f="mirror",p="enhance",h="sharp",_="blur",v="grayscale",m="invert",g="crop"}]);
//# sourceMappingURL=uploadcare.tab-effects.min.js.map