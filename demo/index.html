<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>The Effects Tab for Uploadcare Widget</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <script>
    UPLOADCARE_PUBLIC_KEY = 'demopublickey'
    UPLOADCARE_PREVIEW_STEP = true
    UPLOADCARE_CROP = 'free,2:3,1:1'
    UPLOADCARE_LOCALE = 'en'
    UPLOADCARE_LIVE = false
  </script>

  <script src="https://ucarecdn.com/libs/widget/3.0.0-alpha.beta.2/uploadcare.full.min.js" charset="utf-8"></script>
  <script src="uploadcare.tab-effects.js" charset="utf-8"></script>
</head>

<body>
<input type="text" role="uploadcare-uploader" name="my_file"
       data-effects="blur,crop,enhance,grayscale,rotate,sharp,flip,mirror"/>

<fieldset>
  <legend>Result</legend>
  <div id="result"></div>
</fieldset>
<script>
  uploadcare.registerTab('preview', uploadcareTabEffects)

  var widget = uploadcare.Widget('[role=uploadcare-uploader]')
  widget.onUploadComplete(function (info) {
    var resultEl = document.getElementById('result')
    var linkEl = document.createElement('a')
    var image = new Image()

    resultEl.innerHTML = ''

    linkEl.href = info.cdnUrl
    linkEl.innerText = info.cdnUrl

    image.src = info.cdnUrl

    resultEl.appendChild(linkEl)
    resultEl.appendChild(image)
  })
</script>
</body>
</html>
